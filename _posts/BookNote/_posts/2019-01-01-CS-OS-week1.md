---
layout: post
title: week1 操作系统概述
date:   2019-03-26
categories: ["Operating Systems"]  
---   

[操作系统原理笔记](https://www.coursera.org/learn/os-pku/home/week/1)  

# 1、操作系统做了什么  

{% highlight c %}
#include<stdio.h>  
int main(int argc, char *argv[])
{
puts("Hello World");
return 0;
}
{% endhighlight %}   

程序执行过程：  

+ 用户告诉操作系统执行helloworld程序(如何告知？通过命令行输入命令或鼠标点击相应的图标)   

+ 操作系统：找到helloworld程序的相关信息，检查其类型是否是可执行文件；并通过程序首部信息确定代码和数据在可执行文件中的位置并计算出对应的磁盘块地址(文件格式？windows是PE,Linux是ELF)   

+ 为了执行程序，操作系统：创建一个新的进程，并将helloworld可执行文件格式映射到该进程结构，表示由该进程执行helloworld程序  

+ 操作系统把控制权交给调度程序：(假设调度程序选中helloworld程序) 操作系统：为helloworld程序设置CPU上下文环境，并跳到程序开始处。  

+ 执行helloworld程序第一条指令，发生缺页异常(程序在执行的时候，先要把程序的代码和数据读入内存CPU才能去执行，但是helloworld程序的代码和数据还没有读入内存，所以硬件机制就会捕获出缺页异常，把控制权交给操作系统)    

+ 操作系统：分配一页物理内存，并将代码从磁盘读入内存(根据前面计算出的磁盘块地址把helloworld程序的代码读入内存)，然后继续执行helloworld程序  

(有的时候程序很大 一页内存还不够，因此在这个执行过程中会多次地产生缺页异常 然后去到磁盘读入程序到内存)  

+ helloworld程序执行puts函数(系统调用)，在显示器上写一字符   

+ 操作系统：找到要将字符串送往的显示设备，通常设备是由一个进程控制的，所以操作系统将要写的字符送给该进程  

+ 操作系统：控制设备的进程告诉设备的窗口系统它要显示字符串，窗口系统确定这是一个合法的操作，然后将字符串转换为像素 把像素写入设备的存储映像区   

+ 视频硬件将像素转换成显示器可接收的一组控制/数据信号   

+ 显示器解释信号，激发液晶屏   

+ 屏幕显示"Hello World"  

**上述步骤得出**   

![_config.yml]({{ site.baseurl }}/images/88OS/image1.png)  

在执行的时，需要操作系统来创建进程，因此到操作系统创建进程，进程创建完，从操作系统返回接着执行这个helloworld程序，出现了缺页异常以后呢，控制权又转回了操作系统 操作系统分配物理内存，给这个用户程序，然后又转向用户程序接着执行，然后helloworld程序又要去执行puts函数，又转向了操作系统    

**换个角度看用户程序执行**   

![_config.yml]({{ site.baseurl }}/images/88OS/image2.png)  

操作系统在执行过程中，如果选中了一个程序，会通过调度选中这个程序，执行这个程序，程序执行过程中，会不断地去陷入操作系统，由操作系统完成一些服务，然后再通过调度再选中程序，接着执行

一个程序的 执行过程中，操作系统负责了这个程序的启动过程 负责了这个程序执行的过程，同时在执行的过程中，不断地去为用户程序的执行 提供各种各样的支持

# 2、操作系统的定义和作用   

# 3、操作系统的主要特征  

# 4、典型操作系统的架构  

# 5、操作系统的分类1  

# 6、操作系统的分类2


